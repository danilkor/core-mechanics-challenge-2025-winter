[gd_scene format=3 uid="uid://badqkirhbwrdb"]

[ext_resource type="Script" uid="uid://0ulop1m4ndk6" path="res://Scripts/Wall.gd" id="1_cwx4h"]
[ext_resource type="Texture2D" uid="uid://dyx7f2rcf1fxl" path="res://Assets/kenney_pico-8-platformer/Transparent/Tiles/tile_0076.png" id="3_s2fw2"]

[sub_resource type="GDScript" id="GDScript_oa81w"]
script/source = "@tool
extends Polygon2D

func _process(_delta):
	# 1. Update UVs to match vertex positions so the shader has data to work with
	if uv.size() != polygon.size():
		uv = polygon
	
	# 2. Pass the bounding box size to the shader
	if material is ShaderMaterial:
		var rect = get_bounding_rect()
		material.set_shader_parameter(\"wall_size\", rect.size)

func get_bounding_rect() -> Rect2:
	if polygon.size() == 0: return Rect2()
	var min_v = polygon[0]
	var max_v = polygon[0]
	for v in polygon:
		min_v.x = min(min_v.x, v.x)
		min_v.y = min(min_v.y, v.y)
		max_v.x = max(max_v.x, v.x)
		max_v.y = max(max_v.y, v.y)
	return Rect2(min_v, max_v - min_v)
"

[node name="Wall" type="StaticBody2D" unique_id=1012657456]
collision_layer = 8
collision_mask = 0
script = ExtResource("1_cwx4h")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="." unique_id=408542990]
position = Vector2(3, 3)
polygon = PackedVector2Array(-55, -85, 124, -88, 129, 135, -221, 144, -243, -331, -70, -338)

[node name="TexturePolygon2D" type="Polygon2D" parent="." unique_id=499910191]
texture_filter = 1
texture_repeat = 2
antialiased = true
texture = ExtResource("3_s2fw2")
polygon = PackedVector2Array(-225, -300, -82, -311, -64, -67, 106, -68, 105, 102, -205, 114)
uv = PackedVector2Array(-225, -300, -82, -311, -64, -67, 106, -68, 105, 102, -205, 114)
script = SubResource("GDScript_oa81w")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="." unique_id=305453991]
vertices = PackedVector2Array(-171, -173, -124, -177, -123, -97, -179, -93)
affect_navigation_mesh = true
carve_navigation_mesh = true
